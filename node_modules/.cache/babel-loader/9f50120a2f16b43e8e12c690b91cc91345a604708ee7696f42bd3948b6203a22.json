{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'../api/api';import{useParams,Link}from'react-router-dom';import'./CategoryArticles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryArticles=()=>{const{key}=useParams();// Lấy key từ URL\nconst[articles,setArticles]=useState([]);const[categoryName,setCategoryName]=useState('');const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);const articlesPerPage=12;useEffect(()=>{const fetchArticles=async()=>{try{// Gọi API để lấy danh sách bài viết cho phân loại với phân trang\nconst response=await axios.get(`/categories/cat/${key}/articles`,{params:{page:currentPage,limit:articlesPerPage,sort:'-releaseDate'}});// Cập nhật dữ liệu bài viết và phân loại\nsetArticles(response.data.articles);setCategoryName(response.data.categoryName);setTotalPages(response.data.totalPages);// Đặt tiêu đề trang là tên phân loại\ndocument.title=response.data.categoryName;}catch(error){console.error('Error fetching articles:',error);}};fetchArticles();},[key,currentPage]);const handlePageChange=page=>{setCurrentPage(page);};return/*#__PURE__*/_jsxs(\"div\",{className:\"category-articles-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"category-title\",children:categoryName}),/*#__PURE__*/_jsx(\"div\",{className:\"articles-list\",children:articles.map(article=>/*#__PURE__*/_jsxs(\"div\",{className:\"article-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"article-image\",children:/*#__PURE__*/_jsx(\"img\",{src:`${process.env.REACT_APP_API_BASE_URL}/${article.thumbnailImage}`,alt:article.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"article-details\",children:[/*#__PURE__*/_jsx(Link,{to:`/article-detail/${article.key}`,className:\"article-title-link\",children:/*#__PURE__*/_jsx(\"h2\",{children:article.title})}),/*#__PURE__*/_jsxs(\"p\",{className:\"article-date\",children:[\"Ng\\xE0y \\u0111\\u0103ng: \",new Date(article.releaseDate).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"p\",{className:\"article-summary\",children:article.summary}),/*#__PURE__*/_jsx(\"div\",{className:\"article-button-container\",children:/*#__PURE__*/_jsx(Link,{to:`/article-detail/${article.key}`,className:\"article-detail-button\",children:\"Chi ti\\u1EBFt\"})})]})]},article._id))}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:[...Array(totalPages)].map((_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:index+1===currentPage?'active':'',children:index+1},index))})]});};export default CategoryArticles;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","Link","jsx","_jsx","jsxs","_jsxs","CategoryArticles","key","articles","setArticles","categoryName","setCategoryName","currentPage","setCurrentPage","totalPages","setTotalPages","articlesPerPage","fetchArticles","response","get","params","page","limit","sort","data","document","title","error","console","handlePageChange","className","children","map","article","src","process","env","REACT_APP_API_BASE_URL","thumbnailImage","alt","to","Date","releaseDate","toLocaleDateString","summary","_id","Array","_","index","onClick"],"sources":["E:/webs/bachagroup/src/components/CategoryArticles.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from '../api/api';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport './CategoryArticles.css';\r\n\r\nconst CategoryArticles = () => {\r\n    const { key } = useParams(); // Lấy key từ URL\r\n    const [articles, setArticles] = useState([]);\r\n    const [categoryName, setCategoryName] = useState('');\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n\r\n    const articlesPerPage = 12;\r\n\r\n    useEffect(() => {\r\n        const fetchArticles = async () => {\r\n            try {\r\n                // Gọi API để lấy danh sách bài viết cho phân loại với phân trang\r\n                const response = await axios.get(`/categories/cat/${key}/articles`, {\r\n                    params: {\r\n                        page: currentPage,\r\n                        limit: articlesPerPage,\r\n                        sort: '-releaseDate'\r\n                    }\r\n                });\r\n\r\n                // Cập nhật dữ liệu bài viết và phân loại\r\n                setArticles(response.data.articles);\r\n                setCategoryName(response.data.categoryName);\r\n                setTotalPages(response.data.totalPages);\r\n\r\n                // Đặt tiêu đề trang là tên phân loại\r\n                document.title = response.data.categoryName;\r\n            } catch (error) {\r\n                console.error('Error fetching articles:', error);\r\n            }\r\n        };\r\n\r\n        fetchArticles();\r\n    }, [key, currentPage]);\r\n\r\n    const handlePageChange = (page) => {\r\n        setCurrentPage(page);\r\n    };\r\n\r\n    return (\r\n        <div className=\"category-articles-container\">\r\n            <h1 className=\"category-title\">{categoryName}</h1>\r\n            <div className=\"articles-list\">\r\n                {articles.map((article) => (\r\n                    <div key={article._id} className=\"article-item\">\r\n                        <div className=\"article-image\">\r\n                            <img src={`${process.env.REACT_APP_API_BASE_URL}/${article.thumbnailImage}`} alt={article.title} />\r\n                        </div>\r\n                        <div className=\"article-details\">\r\n                            <Link to={`/article-detail/${article.key}`} className=\"article-title-link\">\r\n                                <h2>{article.title}</h2>\r\n                            </Link>\r\n                            <p className=\"article-date\">Ngày đăng: {new Date(article.releaseDate).toLocaleDateString()}</p>\r\n                            <p className=\"article-summary\">{article.summary}</p>\r\n                            {/* Bọc nút trong một div để căn giữa */}\r\n                            <div className=\"article-button-container\">\r\n                                <Link to={`/article-detail/${article.key}`} className=\"article-detail-button\">\r\n                                    Chi tiết\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Hiển thị phân trang */}\r\n            <div className=\"pagination\">\r\n                {[...Array(totalPages)].map((_, index) => (\r\n                    <button\r\n                        key={index}\r\n                        onClick={() => handlePageChange(index + 1)}\r\n                        className={index + 1 === currentPage ? 'active' : ''}\r\n                    >\r\n                        {index + 1}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoryArticles;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,YAAY,CAC9B,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAClD,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,GAAI,CAAC,CAAGP,SAAS,CAAC,CAAC,CAAE;AAC7B,KAAM,CAACQ,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,YAAY,CAAEC,eAAe,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CAE/C,KAAM,CAAAkB,eAAe,CAAG,EAAE,CAE1BnB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAoB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACA;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,CAAC,mBAAmBZ,GAAG,WAAW,CAAE,CAChEa,MAAM,CAAE,CACJC,IAAI,CAAET,WAAW,CACjBU,KAAK,CAAEN,eAAe,CACtBO,IAAI,CAAE,cACV,CACJ,CAAC,CAAC,CAEF;AACAd,WAAW,CAACS,QAAQ,CAACM,IAAI,CAAChB,QAAQ,CAAC,CACnCG,eAAe,CAACO,QAAQ,CAACM,IAAI,CAACd,YAAY,CAAC,CAC3CK,aAAa,CAACG,QAAQ,CAACM,IAAI,CAACV,UAAU,CAAC,CAEvC;AACAW,QAAQ,CAACC,KAAK,CAAGR,QAAQ,CAACM,IAAI,CAACd,YAAY,CAC/C,CAAE,MAAOiB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CACpD,CACJ,CAAC,CAEDV,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACV,GAAG,CAAEK,WAAW,CAAC,CAAC,CAEtB,KAAM,CAAAiB,gBAAgB,CAAIR,IAAI,EAAK,CAC/BR,cAAc,CAACQ,IAAI,CAAC,CACxB,CAAC,CAED,mBACIhB,KAAA,QAAKyB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACxC5B,IAAA,OAAI2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAErB,YAAY,CAAK,CAAC,cAClDP,IAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CACzBvB,QAAQ,CAACwB,GAAG,CAAEC,OAAO,eAClB5B,KAAA,QAAuByB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3C5B,IAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC1B5B,IAAA,QAAK+B,GAAG,CAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAIJ,OAAO,CAACK,cAAc,EAAG,CAACC,GAAG,CAAEN,OAAO,CAACP,KAAM,CAAE,CAAC,CAClG,CAAC,cACNrB,KAAA,QAAKyB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5B5B,IAAA,CAACF,IAAI,EAACuC,EAAE,CAAE,mBAAmBP,OAAO,CAAC1B,GAAG,EAAG,CAACuB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACtE5B,IAAA,OAAA4B,QAAA,CAAKE,OAAO,CAACP,KAAK,CAAK,CAAC,CACtB,CAAC,cACPrB,KAAA,MAAGyB,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,0BAAW,CAAC,GAAI,CAAAU,IAAI,CAACR,OAAO,CAACS,WAAW,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAI,CAAC,cAC/FxC,IAAA,MAAG2B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEE,OAAO,CAACW,OAAO,CAAI,CAAC,cAEpDzC,IAAA,QAAK2B,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACrC5B,IAAA,CAACF,IAAI,EAACuC,EAAE,CAAE,mBAAmBP,OAAO,CAAC1B,GAAG,EAAG,CAACuB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAE9E,CAAM,CAAC,CACN,CAAC,EACL,CAAC,GAhBAE,OAAO,CAACY,GAiBb,CACR,CAAC,CACD,CAAC,cAGN1C,IAAA,QAAK2B,SAAS,CAAC,YAAY,CAAAC,QAAA,CACtB,CAAC,GAAGe,KAAK,CAAChC,UAAU,CAAC,CAAC,CAACkB,GAAG,CAAC,CAACe,CAAC,CAAEC,KAAK,gBACjC7C,IAAA,WAEI8C,OAAO,CAAEA,CAAA,GAAMpB,gBAAgB,CAACmB,KAAK,CAAG,CAAC,CAAE,CAC3ClB,SAAS,CAAEkB,KAAK,CAAG,CAAC,GAAKpC,WAAW,CAAG,QAAQ,CAAG,EAAG,CAAAmB,QAAA,CAEpDiB,KAAK,CAAG,CAAC,EAJLA,KAKD,CACX,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA1C,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}